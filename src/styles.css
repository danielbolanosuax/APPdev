@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================================
   SMARTPANTRY DESIGN SYSTEM (Tailwind v4 + CSS Variables)
   ========================================================= */

/* ===================== TOKENS (tema oscuro por defecto) ===================== */
:root {
  --color-bg: #0b1217;
  --color-bg-2: #0d151c;
  --color-surface: rgba(255, 255, 255, 0.08);
  --color-surface-2: rgba(255, 255, 255, 0.06);
  --color-surface-3: rgba(255, 255, 255, 0.04);
  --color-text: #e6edf3;
  --color-muted: #97a3b6;

  --brand: #22c55e;
  --brand-600: #16a34a;
  --brand-700: #166534;

  --success: #10b981;
  --warning: #f59e0b;
  --danger:  #ef4444;
  --info:    #60a5fa;

  --shadow-soft: 0 10px 25px rgba(0,0,0,.25);
  --shadow-elev: 0 28px 60px rgba(0,0,0,.38);

  --r-sm: 10px;
  --r-md: 14px;
  --r-lg: 20px;
  --r-xl: 28px;

  --ring: 34 197 94; /* rgb focus ring */
  --blur: 12px;

  --font: "Inter", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;

  --bg-grad: radial-gradient(1200px 600px at 20% -10%, #16a34a33, transparent 60%),
             radial-gradient(900px 500px at 110% 10%, #22c55e22, transparent 50%),
             var(--color-bg);
}

/* ===================== Tema CLARO (alto contraste: texto negro + verde) ===================== */
html.light {
  --color-bg: #ffffff;          /* fondo blanco */
  --color-bg-2: #f7fafc;        /* secciones muy claras */
  --color-surface: #ffffff;     /* tarjetas blancas */
  --color-surface-2: #f8fafc;
  --color-surface-3: #eef2f7;
  --color-text: #0e1320;        /* casi negro */
  --color-muted: #1f2937;       /* gris oscuro */

  --brand: #16a34a;
  --brand-600: #159043;
  --brand-700: #166534;

  --bg-grad:
    radial-gradient(1000px 600px at 10% -10%, #16a34a14, transparent 60%),
    radial-gradient(900px 600px at 110% 0%, #22c55e12, transparent 60%),
    #ffffff;
}

/* Texto global fuerte en tema claro */
html.light body,
html.light p,
html.light li,
html.light label,
html.light input,
html.light select,
html.light button,
html.light span,
html.light small {
  color: var(--color-text);
}

/* Bordes un poco m치s marcados en claro */
html.light .border-subtle { border-color: rgba(2, 6, 12, 0.12); }

/* Chips/Badges con texto oscuro en claro */
html.light .badge,
html.light .sp-chip { color: var(--color-text); border-color: rgba(2, 6, 12, 0.14); }

/* Inputs m치s s칩lidos en claro */
html.light .input,
html.light .select,
html.light .textarea,
html.light .search-input {
  background: #f8fafc;
  border-color: rgba(2, 6, 12, 0.18);
}
html.light .input:hover,
html.light .select:hover,
html.light .textarea:hover,
html.light .search-input:hover {
  background: #fff;
}

/* KPI valores en verde de marca */
.kpi-value { color: var(--brand) !important; }

/* ===================== BASE ===================== */
* { box-sizing: border-box; }
html, body, #root { height: 100%; }

body {
  background: var(--bg-grad);
  color: var(--color-text);
  font-family: var(--font);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Scrollbar */
::-webkit-scrollbar { width: 10px; height: 10px; }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,.18); border-radius: 999px; }
html.light ::-webkit-scrollbar-thumb { background: rgba(0,0,0,.18); }

/* Focus accesible */
:where(button,a,input,select,textarea,[role="button"]):focus-visible {
  outline: none;
  box-shadow: 0 0 0 4px rgba(var(--ring), .35), inset 0 0 0 1px rgba(var(--ring), .65);
  border-color: rgba(var(--ring), .65);
}

/* ===================== LAYOUT HELPERS ===================== */
.container-page { @apply mx-auto w-full; max-width: 1100px; padding: 1rem; }
.section {
  border-radius: var(--r-lg);
  box-shadow: var(--shadow-elev);
  background: var(--color-surface);
  backdrop-filter: saturate(125%) blur(var(--blur));
  border: 1px solid rgba(255,255,255,.12);
}

/* ===================== CARDS ===================== */
.sp-card {
  background: var(--color-surface);
  backdrop-filter: saturate(120%) blur(var(--blur));
  border: 1px solid rgba(255,255,255,.14);
  border-radius: var(--r-md);
  box-shadow: var(--shadow-soft);
}
.sp-card-lg { border-radius: var(--r-lg); box-shadow: var(--shadow-elev); }
.sp-card-hover:hover { transform: translateY(-2px); box-shadow: var(--shadow-elev); }

/* ===================== BUTTONS ===================== */
.sp-btn {
  display: inline-flex; align-items:center; justify-content:center;
  gap:.5rem; padding:.65rem .9rem; font-weight:700; letter-spacing:.01em;
  border-radius:12px; border:1px solid transparent; cursor:pointer;
  transition: transform .12s ease, box-shadow .12s ease, background-color .12s ease, opacity .12s ease;
}
.sp-btn:disabled { opacity:.6; cursor:not-allowed; }

.sp-btn-primary {
  color:#04180c;
  background: linear-gradient(180deg,#22d39a 0%,#16a34a 100%);
  box-shadow: 0 14px 35px rgba(34,197,94,.35);
}
.sp-btn-primary:hover { transform: translateY(-1px); }
.sp-btn-primary:active { transform: translateY(0); }

.sp-btn-ghost {
  color: var(--color-text);
  background: var(--color-surface-2);
  border-color: rgba(255,255,255,.14);
}
.sp-btn-danger {
  color:#fff;
  background: linear-gradient(180deg,#ff6a6f 0%,#ef4444 100%);
  box-shadow: 0 14px 35px rgba(239,68,68,.35);
}

/* Icon-only */
.btn-icon {
  display:inline-grid; place-items:center;
  width:40px; height:40px; border-radius:12px;
  background: var(--color-surface-2); border:1px solid rgba(255,255,255,.14);
}
.btn-icon:hover { background: var(--color-surface); }

/* ===================== FORMS ===================== */
.input, .select, .textarea {
  width:100%; color:var(--color-text);
  background: var(--color-surface-2);
  border:1px solid rgba(255,255,255,.14);
  border-radius:12px; padding:.6rem .8rem;
  transition: border-color .15s, background-color .15s, box-shadow .15s;
}
.input::placeholder { color:#ffffffa6; }
.select { padding-right: 2.25rem; }
.input:hover, .select:hover, .textarea:hover { background: var(--color-surface); }

/* ===================== BADGES / CHIPS ===================== */
.badge {
  display:inline-flex; align-items:center; gap:.35rem; font-weight:600;
  padding:.25rem .6rem; border-radius:999px; font-size:12px;
  background: var(--color-surface-2); color: var(--color-muted);
  border:1px solid rgba(255,255,255,.15);
}
.badge.success { background: color-mix(in oklab, var(--success) 18%, transparent); color:#d1fae5; }
.badge.warn    { background: color-mix(in oklab, var(--warning) 18%, transparent); color:#fff7ed; }
.badge.info    { background: color-mix(in oklab, var(--info) 18%, transparent); color:#dbeafe; }

/* Alias para compatibilidad (sin @apply a clase custom) */
.sp-chip {
  display:inline-flex; align-items:center; gap:.35rem;
  padding:.25rem .6rem; border-radius:999px; font-size:12px; font-weight:600;
  background: var(--color-surface-2); color: var(--color-muted);
  border:1px solid rgba(255,255,255,.15);
}

/* Variantes r치pidas */
.sp-chip.success { background: color-mix(in oklab, var(--success) 18%, transparent); }
.sp-chip.warn    { background: color-mix(in oklab, var(--warning) 18%, transparent); }
.sp-chip.info    { background: color-mix(in oklab, var(--info) 18%, transparent); }

/* ===================== TABS ===================== */
.tabs {
  display:grid; grid-auto-flow:column; gap:.5rem;
  background: var(--color-surface-3); padding:.35rem; border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
}
.tab {
  display:flex; align-items:center; justify-content:center; gap:.4rem;
  padding:.5rem .75rem; border-radius:12px; font-weight:700; font-size:14px;
  color:var(--color-text); background:transparent;
}
.tab[aria-current="page"] {
  background: var(--brand);
  color:#08240f;
  box-shadow: 0 10px 24px rgba(34,197,94,.35);
}

/* ===================== KPI ===================== */
.kpi { border-radius:var(--r-lg); border:1px solid rgba(255,255,255,.12); background:var(--color-surface-2); padding:.9rem; }
.kpi-title { color: var(--color-muted); font-size:.9rem; }
.kpi-value { font-weight:800; font-size:1.25rem; }

/* ===================== SKELETON / EFFECTS ===================== */
.skeleton { position:relative; overflow:hidden; border-radius:10px;
  background: linear-gradient(90deg,#ffffff14 25%,#ffffff22 37%,#ffffff14 63%);
  background-size:400% 100%; animation: shimmer 1.2s ease-in-out infinite; }
@keyframes shimmer { 0% {background-position:100% 0} 100% {background-position:0 0} }
.fade-in { animation: fadeIn .25s ease-out; }
@keyframes fadeIn { from {opacity:0; transform:translateY(6px)} to {opacity:1; transform:none} }

/* ===================== UTILIDADES ===================== */
.text-muted{ color:var(--color-muted); }
.surface{ background:var(--color-surface); }
.surface-2{ background:var(--color-surface-2); }
.surface-3{ background:var(--color-surface-3); }
.radius-sm{ border-radius:var(--r-sm); }
.radius-md{ border-radius:var(--r-md); }
.radius-lg{ border-radius:var(--r-lg); }
.radius-xl{ border-radius:var(--r-xl); }
.shadow-soft{ box-shadow:var(--shadow-soft); }
.shadow-elev{ box-shadow:var(--shadow-elev); }
.border-subtle{ border:1px solid rgba(255,255,255,.12); }
.hover-lift:hover{ transform:translateY(-2px); box-shadow:var(--shadow-elev); }

/* ===================== APP-SPECIFIC ===================== */
.app-topbar {
  border:1px solid rgba(255,255,255,.12);
  background: color-mix(in oklab, var(--color-surface) 80%, transparent);
  backdrop-filter: blur(var(--blur)) saturate(120%);
  border-radius: 0 0 var(--r-lg) var(--r-lg);
  box-shadow: var(--shadow-soft);
}
.search-input {
  position:relative; background:rgba(255,255,255,.10);
  border:1px solid rgba(255,255,255,.15); border-radius:12px; color:var(--color-text);
  padding:.55rem .75rem .55rem 2.25rem;
}
.search-input::placeholder{ color:#777; }
